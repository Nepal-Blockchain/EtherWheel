!function(){"use strict";angular.module("ether-spinner",["ngRoute","rzModule"]).config(["$routeProvider",function(e){e.otherwise({redirectTo:"/"})}])}(),function(){"use strict";function e(e,t,n){function a(){if(o(),n.isConnected()){var e=[{constant:!0,inputs:[{name:"",type:"address"}],name:"stakes",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"stakeholders",outputs:[{name:"",type:"address"}],type:"function"},{constant:!0,inputs:[],name:"goal",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!1,inputs:[],name:"refundStake",outputs:[],type:"function"},{constant:!1,inputs:[],name:"destroy",outputs:[],type:"function"},{constant:!0,inputs:[],name:"increment",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"numStakeholders",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!1,inputs:[{name:"rejectPartialBets",type:"bool"}],name:"buyStake",outputs:[],type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"recentWins",outputs:[{name:"winner",type:"address"},{name:"timestamp",type:"uint256"},{name:"stake",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"host",outputs:[{name:"",type:"address"}],type:"function"},{inputs:[{name:"_goalInFinney",type:"uint256"},{name:"_incrementInFinney",type:"uint256"},{name:"_recentWinsCount",type:"uint8"}],type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"winner",type:"address"},{indexed:!1,name:"timestamp",type:"uint256"},{indexed:!1,name:"stake",type:"uint256"}],name:"Won",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"stakeholder",type:"address"}],name:"ChangedStake",type:"event"}],t=n.web3.eth.contract(e);h=t.at(g),l.goal=n.web3.fromWei(h.goal(),"ether").toString(),l.sliderStep=n.web3.fromWei(h.increment(),"ether").toString(),l.onSliderChanged=p,v.value=l.goal,l.accounts=n.web3.eth.accounts,l.selectedAccount=n.web3.eth.defaultAccount,l.selectedAccount||(l.selectedAccount=n.web3.eth.coinbase),s(),i(),u(),r();var a=h.ChangedStake();a.watch(c);var m=h.Won();m.watch(d)}}function o(){var e=[v],t={animationEasing:"easeInOut",segmentStrokeWidth:3,animationSteps:20,segmentStrokeColor:"#EBF0F1",percentageInnerCutout:75,responsive:!0,tooltipTemplate:function(e){var t=e.label+": "+e.value+" Îž";return l.goal&&(t+=" ("+e.value/l.goal*100+"%)"),t}},n=document.getElementById("wheel").getContext("2d");m=new Chart(n).Doughnut(e,t)}function u(){if(n.isConnected()){var e=n.web3.eth.getBalance(g),t=n.web3.fromWei(e,"ether");l.balance=parseFloat(t.toString()),m.segments[m.segments.length-1].value=l.goal-l.balance,m.update()}}function i(){n.isConnected()&&(l.currentStakes=n.web3.fromWei(h.stakes(l.selectedAccount),"ether").toString(),l.desiredStakes=l.currentStakes)}function s(){if(n.isConnected()){m.removeData(),y={};for(var e=h.numStakeholders(),t=0;e>t;++t){var a=h.stakeholders(t).toString();y[a]={label:a,value:n.web3.fromWei(h.stakes(a),"ether"),color:a===l.selectedAccount?"#C99D66":"#3D3E3F",index:t},m.addData(y[a])}m.addData(v),m.update()}}function r(){!n.isConnected()}function c(e,a){if(!e){var o=a.args.stakeholder.toString(),s=n.web3.fromWei(h.stakes(o),"ether");if(o in y)m.segments[y[o].index].value=s;else{var r=Object.keys(y).lengthupd;y[o]={label:o,value:s,color:o===l.selectedAccount?"#C99D66":"#3D3E3F",index:r},m.addData(y[o],r)}m.update()}u(),i(),t.$apply()}function d(e,n){u(),i(),r(),t.$apply()}function p(e,t){m.segments[y[l.selectedAccount.toString()].index].value=t,m.update()}var l=this;l.isConnected=n.isConnected;var m,y,f="#dae4e7",g="0xaCD9e1e68622285Cc3d339D04b76BA7acEE6FC1C",h=null,v={value:5,color:f,label:"Empty"};a()}e.$inject=["$route","$scope","ethereum"],angular.module("ether-spinner").controller("SpinnerCtrl",e)}(),function(){"use strict";function e(){function e(){n.web3.setProvider(new n.web3.providers.HttpProvider("http://localhost:8545"))}function t(){return n.web3.currentProvider.isConnected()}var n={web3:new Web3,isConnected:t};return e(),n}angular.module("ether-spinner").service("ethereum",e)}();
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImFwcC5qcyIsInNwaW5uZXIuY29udHJvbGxlci5qcyIsImFwcC5taW4uanMiLCJldGhlcmV1bS5zZXJ2aWNlLmpzIl0sIm5hbWVzIjpbImFuZ3VsYXIiLCJtb2R1bGUiLCJjb25maWciLCIkcm91dGVQcm92aWRlciIsIm90aGVyd2lzZSIsInJlZGlyZWN0VG8iLCJTcGlubmVyQ3RybCIsIiRyb3V0ZSIsIiRzY29wZSIsImV0aGVyZXVtIiwiYWN0aXZhdGUiLCJjcmVhdGVDaGFydCIsImlzQ29ubmVjdGVkIiwiYWJpIiwiY29uc3RhbnQiLCJpbnB1dHMiLCJuYW1lIiwidHlwZSIsIm91dHB1dHMiLCJhbm9ueW1vdXMiLCJpbmRleGVkIiwiY29udHJhY3RCbHVlcHJpbnQiLCJ3ZWIzIiwiZXRoIiwiY29udHJhY3QiLCJhdCIsImNvbnRyYWN0QWRkcmVzcyIsInZtIiwiZ29hbCIsImZyb21XZWkiLCJ0b1N0cmluZyIsInNsaWRlclN0ZXAiLCJpbmNyZW1lbnQiLCJvblNsaWRlckNoYW5nZWQiLCJlbXB0eURhdGFTbG90IiwidmFsdWUiLCJhY2NvdW50cyIsInNlbGVjdGVkQWNjb3VudCIsImRlZmF1bHRBY2NvdW50IiwiY29pbmJhc2UiLCJpbml0aWFsaXplU3Rha2Vob2xkZXJzRGF0YSIsInVwZGF0ZVN0YWtlcyIsInVwZGF0ZUJhbGFuY2UiLCJ1cGRhdGVSZWNlbnRSZXN1bHRzIiwib25TdGFrZUNoYW5nZWRFdmVudCIsIkNoYW5nZWRTdGFrZSIsIndhdGNoIiwib25TdGFrZUNoYW5nZWQiLCJvbldvbkV2ZW50IiwiV29uIiwib25Xb24iLCJzdGFydGluZ0RhdGEiLCJjaGFydE9wdGlvbnMiLCJhbmltYXRpb25FYXNpbmciLCJzZWdtZW50U3Ryb2tlV2lkdGgiLCJhbmltYXRpb25TdGVwcyIsInNlZ21lbnRTdHJva2VDb2xvciIsInBlcmNlbnRhZ2VJbm5lckN1dG91dCIsInJlc3BvbnNpdmUiLCJ0b29sdGlwVGVtcGxhdGUiLCJ2YWx1ZU9iamVjdCIsInRvb2x0aXAiLCJsYWJlbCIsImN0eCIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJnZXRDb250ZXh0IiwiY2hhcnQiLCJDaGFydCIsIkRvdWdobnV0Iiwid2VpIiwiZ2V0QmFsYW5jZSIsImV0aGVyIiwiYmFsYW5jZSIsInBhcnNlRmxvYXQiLCJzZWdtZW50cyIsImxlbmd0aCIsInVwZGF0ZSIsImN1cnJlbnRTdGFrZXMiLCJzdGFrZXMiLCJkZXNpcmVkU3Rha2VzIiwicmVtb3ZlRGF0YSIsInN0YWtlaG9sZGVyc0RhdGEiLCJudW1TdGFrZWhvbGRlcnMiLCJpIiwic3Rha2Vob2xkZXJBZGRyZXNzIiwic3Rha2Vob2xkZXJzIiwiY29sb3IiLCJpbmRleCIsImFkZERhdGEiLCJlcnJvciIsInJlc3VsdCIsImFyZ3MiLCJzdGFrZWhvbGRlciIsIk9iamVjdCIsImtleXMiLCJsZW5ndGh1cGQiLCIkYXBwbHkiLCJzbGlkZXJJZCIsIm1vZGVsVmFsdWUiLCJ0aGlzIiwiZW1wdHlCYXJDb2xvdXIiLCIkaW5qZWN0IiwiY29udHJvbGxlciIsInNlcnZpY2UiLCJzZXRQcm92aWRlciIsInByb3ZpZGVycyIsIkh0dHBQcm92aWRlciIsImN1cnJlbnRQcm92aWRlciIsIldlYjMiXSwibWFwcGluZ3MiOiJDQUFBLFdBQ0UsWUFFQUEsU0FBUUMsT0FBTyxpQkFDYixVQUNBLGFBRUZDLFFBQVEsaUJBQWtCLFNBQVNDLEdBQ2pDQSxFQUFlQyxXQUFXQyxXQUFZLFlDUjFDLFdBQ0UsWUFLQSxTQUFTQyxHQUFZQyxFQUFRQyxFQUFRQyxHQW9CbkMsUUFBU0MsS0FFUCxHQURBQyxJQUNJRixFQUFTRyxjQUFiLENBRUEsR0FBSUMsS0FBUUMsVUFBVyxFQUFLQyxTQUFXQyxLQUFPLEdBQUdDLEtBQU8sWUFBWUQsS0FBTyxTQUFTRSxVQUFZRixLQUFPLEdBQUdDLEtBQU8sWUFBWUEsS0FBTyxhQUFhSCxVQUFXLEVBQUtDLFNBQVdDLEtBQU8sR0FBR0MsS0FBTyxZQUFZRCxLQUFPLGVBQWVFLFVBQVlGLEtBQU8sR0FBR0Ms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bEQsTUFBT0EsRUFDUG9ELE1BQVFGLElBQXVCMUQsRUFBR1UsZ0JBQW1CLFVBQVksVUFDakVtRCxNQUFPQSxHQUVUckIsRUFBTXNCLFFBQVFQLEVBQWlCRyxHQUFxQkcsR0FHdERyQixFQUFNVSxTQUdSbkMsSUFDQUQsSUFDQWpDLEVBQU95RixTQUdULFFBQVMvQyxHQUFNd0MsRUFBT0MsR0FDcEJqRCxJQUNBRCxJQUNBRSxJQUNBbkMsRUFBT3lGLFNBR1QsUUFBU2hFLEdBQWdCaUUsRUFBVUMsR0FDakNoQyxFQUFNUSxTQUFTTyxFQUFpQnZELEVBQUdVLGdCQUFnQlAsWUFBWTBELE9BQU9yRCxNQUFRZ0UsRUFDOUVoQyxFQUFNVSxTQXZKUixHQUFJbEQsR0FBS3lFLElBQ1R6RSxHQUFHZixZQUFjSCxFQUFTRyxXQUUxQixJQUlJdUQsR0FDQWUsRUFMQW1CLEVBQWlCLFVBQ2pCM0UsRUFBa0IsNkNBQ2xCRixFQUFXLEtBSVhVLEdBQ0ZDLE1BQU8sRUFDUG9ELE1BQU9jLEVBQ1B2QyxNQUFPLFFBR1RwRCxLQ1BGSixFQUFZZ0csU0FBVyxTQUFVLFNBQVUsWURaM0N0RyxRQUFRQyxPQUFPLGlCQUFpQnNHLFdBQVcsY0FBZWpHLE1FSDVELFdBQ0ksWUFLQSxTQUFTRyxLQVlQLFFBQVNDLEtBQ1A4RixFQUFRbEYsS0FBS21GLFlBQVksR0FBSUQsR0FBUWxGLEtBQUtvRixVQUFVQyxhQUFhLDBCQUduRSxRQUFTL0YsS0FDUCxNQUFPNEYsR0FBUWxGLEtBQUtzRixnQkFBZ0JoRyxjQWhCdEMsR0FBSTRGLElBQ0ZsRixLQUFNLEdBQUl1RixNQUNWakcsWUFBYUEsRUFLZixPQUZBRixLQUVPOEYsRUFYVHhHLFFBQVFDLE9BQU8saUJBQWlCdUcsUUFBUSxXQUFZL0YiLCJmaWxlIjoiYXBwLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdldGhlci1zcGlubmVyJywgW1xuICAgICduZ1JvdXRlJyxcbiAgICAncnpNb2R1bGUnXG4gIF0pLlxuICBjb25maWcoWyckcm91dGVQcm92aWRlcicsIGZ1bmN0aW9uKCRyb3V0ZVByb3ZpZGVyKSB7XG4gICAgJHJvdXRlUHJvdmlkZXIub3RoZXJ3aXNlKHtyZWRpcmVjdFRvOiAnLyd9KTtcbiAgfV0pO1xufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIGFuZ3VsYXIubW9kdWxlKCdldGhlci1zcGlubmVyJykuY29udHJvbGxlcignU3Bpbm5lckN0cmwnLCBTcGlubmVyQ3RybCk7XG5cbiAgLypAbmdJbmplY3QqL1xuICBmdW5jdGlvbiBTcGlubmVyQ3RybCgkcm91dGUsICRzY29wZSwgZXRoZXJldW0pIHtcbiAgICB2YXIgdm0gPSB0aGlzO1xuICAgIHZtLmlzQ29ubmVjdGVkID0gZXRoZXJldW0uaXNDb25uZWN0ZWQ7XG5cbiAgICB2YXIgZW1wdHlCYXJDb2xvdXIgPSAnI2RhZTRlNyc7XG4gICAgdmFyIGNvbnRyYWN0QWRkcmVzcyA9ICcweGFDRDllMWU2ODYyMjI4NUNjM2QzMzlEMDRiNzZCQTdhY0VFNkZDMUMnO1xuICAgIHZhciBjb250cmFjdCA9IG51bGw7XG5cbiAgICB2YXIgY2hhcnQ7XG4gICAgdmFyIHN0YWtlaG9sZGVyc0RhdGE7XG4gICAgdmFyIGVtcHR5RGF0YVNsb3QgPSB7XG4gICAgICB2YWx1ZTogNS4wLFxuICAgICAgY29sb3I6IGVtcHR5QmFyQ29sb3VyLFxuICAgICAgbGFiZWw6IFwiRW1wdHlcIlxuICAgIH07XG5cbiAgICBhY3RpdmF0ZSgpO1xuXG4gICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgZnVuY3Rpb24gYWN0aXZhdGUoKSB7XG4gICAgICBjcmVhdGVDaGFydCgpO1xuICAgICAgaWYoIWV0aGVyZXVtLmlzQ29ubmVjdGVkKCkpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHZhciBhYmkgPSBbe1wiY29uc3RhbnRcIjp0cnVlLFwiaW5wdXRzXCI6W3tcIm5hbWVcIjpcIlwiLFwidHlwZVwiOlwiYWRkcmVzc1wifV0sXCJuYW1lXCI6XCJzdGFrZXNcIixcIm91dHB1dHNcIjpbe1wibmFtZVwiOlwiXCIsXCJ0eXBlXCI6XCJ1aW50MjU2XCJ9XSxcInR5cGVcIjpcImZ1bmN0aW9uXCJ9LHtcImNvbnN0YW50XCI6dHJ1ZSxcImlucHV0c1wiOlt7XCJuYW1lXCI6XCJcIixcInR5cGVcIjpcInVpbnQyNTZcIn1dLFwibmFtZVwiOlwic3Rha2Vob2xkZXJzXCIsXCJvdXRwdXRzXCI6W3tcIm5hbWVcIjpcIlwiLFwidHlwZVwiOlwiYWRkcmVzc1wifV0sXCJ0eXBlXCI6XCJmdW5jdGlvblwifSx7XCJjb25zdGFudFwiOnRydWUsXCJpbnB1dHNcIjpbXSxcIm5hbWVcIjpcImdvYWxcIixcIm91dHB1dHNcIjpbe1wibmFtZVwiOlwiXCIsXCJ0eXBlXCI6XCJ1aW50MjU2XCJ9XSxcInR5cGVcIjpcImZ1bmN0aW9uXCJ9LHtcImNvbnN0YW50XCI6ZmFsc2UsXCJpbnB1dHNcIjpbXSxcIm5hbWVcIjpcInJlZnVuZFN0YWtlXCIsXCJvdXRwdXRzXCI6W10sXCJ0eXBlXCI6XCJmdW5jdGlvblwifSx7XCJjb25zdGFudFwiOmZhbHNlLFwiaW5wdXRzXCI6W10sXCJuYW1lXCI6XCJkZXN0cm95XCIsXCJvdXRwdXRzXCI6W10sXCJ0eXBlXCI6XCJmdW5jdGlvblwifSx7XCJjb25zdGFudFwiOnRydWUsXCJpbnB1dHNcIjpbXSxcIm5hbWVcIjpcImluY3JlbWVudFwiLFwib3V0cHV0c1wiOlt7XCJuYW1lXCI6XCJcIixcInR5cGVcIjpcInVpbnQyNTZcIn1dLFwidHlwZVwiOlwiZnVuY3Rpb25cIn0se1wiY29uc3RhbnRcIjp0cnVlLFwiaW5wdXRzXCI6W10sXCJuYW1lXCI6XCJudW1TdGFrZWhvbGRlcnNcIixcIm91dHB1dHNcIjpbe1wibmFtZVwiOlwiXCIsXCJ0eXBlXCI6XCJ1aW50MjU2XCJ9XSxcInR5cGVcIjpcImZ1bmN0aW9uXCJ9LHtcImNvbnN0YW50XCI6ZmFsc2UsXCJpbnB1dHNcIjpbe1wibmFtZVwiOlwicmVqZWN0UGFydGlhbEJldHNcIixcInR5cGVcIjpcImJvb2xcIn1dLFwibmFtZVwiOlwiYnV5U3Rha2VcIixcIm91dHB1dHNcIjpbXSxcInR5cGVcIjpcImZ1bmN0aW9uXCJ9LHtcImNvbnN0YW50XCI6dHJ1ZSxcImlucHV0c1wiOlt7XCJuYW1lXCI6XCJcIixcInR5cGVcIjpcInVpbnQyNTZcIn1dLFwibmFtZVwiOlwicmVjZW50V2luc1wiLFwib3V0cHV0c1wiOlt7XCJuYW1lXCI6XCJ3aW5uZXJcIixcInR5cGVcIjpcImFkZHJlc3NcIn0se1wibmFtZVwiOlwidGltZXN0YW1wXCIsXCJ0eXBlXCI6XCJ1aW50MjU2XCJ9LHtcIm5hbWVcIjpcInN0YWtlXCIsXCJ0eXBlXCI6XCJ1aW50MjU2XCJ9XSxcInR5cGVcIjpcImZ1bmN0aW9uXCJ9LHtcImNvbnN0YW50XCI6dHJ1ZSxcImlucHV0c1wiOltdLFwibmFtZVwiOlwiaG9zdFwiLFwib3V0cHV0c1wiOlt7XCJuYW1lXCI6XCJcIixcInR5cGVcIjpcImFkZHJlc3NcIn1dLFwidHlwZVwiOlwiZnVuY3Rpb25cIn0se1wiaW5wdXRzXCI6W3tcIm5hbWVcIjpcIl9nb2FsSW5GaW5uZXlcIixcInR5cGVcIjpcInVpbnQyNTZcIn0se1wibmFtZVwiOlwiX2luY3JlbWVudEluRmlubmV5XCIsXCJ0eXBlXCI6XCJ1aW50MjU2XCJ9LHtcIm5hbWVcIjpcIl9yZWNlbnRXaW5zQ291bnRcIixcInR5cGVcIjpcInVpbnQ4XCJ9XSxcInR5cGVcIjpcImNvbnN0cnVjdG9yXCJ9LHtcImFub255bW91c1wiOmZhbHNlLFwiaW5wdXRzXCI6W3tcImluZGV4ZWRcIjpmYWxzZSxcIm5hbWVcIjpcIndpbm5lclwiLFwidHlwZVwiOlwiYWRkcmVzc1wifSx7XCJpbmRleGVkXCI6ZmFsc2UsXCJuYW1lXCI6XCJ0aW1lc3RhbXBcIixcInR5cGVcIjpcInVpbnQyNTZcIn0se1wiaW5kZXhlZFwiOmZhbHNlLFwibmFtZVwiOlwic3Rha2VcIixcInR5cGVcIjpcInVpbnQyNTZcIn1dLFwibmFtZVwiOlwiV29uXCIsXCJ0eXBlXCI6XCJldmVudFwifSx7XCJhbm9ueW1vdXNcIjpmYWxzZSxcImlucHV0c1wiOlt7XCJpbmRleGVkXCI6ZmFsc2UsXCJuYW1lXCI6XCJzdGFrZWhvbGRlclwiLFwidHlwZVwiOlwiYWRkcmVzc1wifV0sXCJuYW1lXCI6XCJDaGFuZ2VkU3Rha2VcIixcInR5cGVcIjpcImV2ZW50XCJ9XTtcbiAgICAgIHZhciBjb250cmFjdEJsdWVwcmludCA9IGV0aGVyZXVtLndlYjMuZXRoLmNvbnRyYWN0KGFiaSk7XG4gICAgICBjb250cmFjdCA9IGNvbnRyYWN0Qmx1ZXByaW50LmF0KGNvbnRyYWN0QWRkcmVzcyk7XG5cbiAgICAgIHZtLmdvYWwgPSBldGhlcmV1bS53ZWIzLmZyb21XZWkoY29udHJhY3QuZ29hbCgpLCAnZXRoZXInKS50b1N0cmluZygpO1xuICAgICAgdm0uc2xpZGVyU3RlcCA9IGV0aGVyZXVtLndlYjMuZnJvbVdlaShjb250cmFjdC5pbmNyZW1lbnQoKSwgJ2V0aGVyJykudG9TdHJpbmcoKTtcbiAgICAgIHZtLm9uU2xpZGVyQ2hhbmdlZCA9IG9uU2xpZGVyQ2hhbmdlZDtcbiAgICAgIGVtcHR5RGF0YVNsb3QudmFsdWUgPSB2bS5nb2FsO1xuXG4gICAgICB2bS5hY2NvdW50cyA9IGV0aGVyZXVtLndlYjMuZXRoLmFjY291bnRzO1xuICAgICAgdm0uc2VsZWN0ZWRBY2NvdW50ID0gZXRoZXJldW0ud2ViMy5ldGguZGVmYXVsdEFjY291bnQ7XG4gICAgICBpZighdm0uc2VsZWN0ZWRBY2NvdW50KSB7XG4gICAgICAgIHZtLnNlbGVjdGVkQWNjb3VudCA9IGV0aGVyZXVtLndlYjMuZXRoLmNvaW5iYXNlO1xuICAgICAgfVxuXG4gICAgICBpbml0aWFsaXplU3Rha2Vob2xkZXJzRGF0YSgpO1xuICAgICAgdXBkYXRlU3Rha2VzKCk7XG4gICAgICB1cGRhdGVCYWxhbmNlKCk7XG4gICAgICB1cGRhdGVSZWNlbnRSZXN1bHRzKCk7XG5cbiAgICAgIHZhciBvblN0YWtlQ2hhbmdlZEV2ZW50ID0gY29udHJhY3QuQ2hhbmdlZFN0YWtlKCk7XG4gICAgICBvblN0YWtlQ2hhbmdlZEV2ZW50LndhdGNoKG9uU3Rha2VDaGFuZ2VkKTtcblxuICAgICAgdmFyIG9uV29uRXZlbnQgPSBjb250cmFjdC5Xb24oKTtcbiAgICAgIG9uV29uRXZlbnQud2F0Y2gob25Xb24pO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIGNyZWF0ZUNoYXJ0KCkge1xuICAgICAgdmFyIHN0YXJ0aW5nRGF0YSA9IFtlbXB0eURhdGFTbG90XTtcblxuICAgICAgdmFyIGNoYXJ0T3B0aW9ucyA9IHtcbiAgICAgICAgYW5pbWF0aW9uRWFzaW5nOiAnZWFzZUluT3V0JyxcbiAgICAgICAgc2VnbWVudFN0cm9rZVdpZHRoOiAzLFxuICAgICAgICBhbmltYXRpb25TdGVwczogMjAsXG4gICAgICAgIHNlZ21lbnRTdHJva2VDb2xvcjogJyNFQkYwRjEnLFxuICAgICAgICBwZXJjZW50YWdlSW5uZXJDdXRvdXQ6IDc1LFxuICAgICAgICByZXNwb25zaXZlOiB0cnVlLFxuICAgICAgICB0b29sdGlwVGVtcGxhdGU6IGZ1bmN0aW9uKHZhbHVlT2JqZWN0KSB7XG4gICAgICAgICAgdmFyIHRvb2x0aXAgPSB2YWx1ZU9iamVjdC5sYWJlbCArIFwiOiBcIiArIHZhbHVlT2JqZWN0LnZhbHVlICsgXCIgzp5cIjtcbiAgICAgICAgICBpZighIXZtLmdvYWwpIHtcbiAgICAgICAgICAgIHRvb2x0aXAgKz0gXCIgKFwiICsgKHZhbHVlT2JqZWN0LnZhbHVlIC8gdm0uZ29hbCAqIDEwMCkgKyBcIiUpXCI7XG4gICAgICAgICAgfVxuICAgICAgICAgIHJldHVybiB0b29sdGlwO1xuICAgICAgICB9XG4gICAgICB9O1xuXG4gICAgICB2YXIgY3R4ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJ3aGVlbFwiKS5nZXRDb250ZXh0KFwiMmRcIik7XG4gICAgICBjaGFydCA9IG5ldyBDaGFydChjdHgpLkRvdWdobnV0KHN0YXJ0aW5nRGF0YSwgY2hhcnRPcHRpb25zKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVCYWxhbmNlKCkge1xuICAgICAgaWYoIWV0aGVyZXVtLmlzQ29ubmVjdGVkKCkpIHsgcmV0dXJuOyB9XG5cbiAgICAgIHZhciB3ZWkgPSBldGhlcmV1bS53ZWIzLmV0aC5nZXRCYWxhbmNlKGNvbnRyYWN0QWRkcmVzcyk7XG4gICAgICB2YXIgZXRoZXIgPSBldGhlcmV1bS53ZWIzLmZyb21XZWkod2VpLCAnZXRoZXInKTtcbiAgICAgIHZtLmJhbGFuY2UgPSBwYXJzZUZsb2F0KGV0aGVyLnRvU3RyaW5nKCkpO1xuICAgICAgY2hhcnQuc2VnbWVudHNbY2hhcnQuc2VnbWVudHMubGVuZ3RoIC0gMV0udmFsdWUgPSAodm0uZ29hbCAtIHZtLmJhbGFuY2UpO1xuICAgICAgY2hhcnQudXBkYXRlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gdXBkYXRlU3Rha2VzKCkge1xuICAgICAgaWYoIWV0aGVyZXVtLmlzQ29ubmVjdGVkKCkpIHsgcmV0dXJuOyB9XG4gICAgICB2bS5jdXJyZW50U3Rha2VzID0gZXRoZXJldW0ud2ViMy5mcm9tV2VpKGNvbnRyYWN0LnN0YWtlcyh2bS5zZWxlY3RlZEFjY291bnQpLCAnZXRoZXInKS50b1N0cmluZygpO1xuICAgICAgdm0uZGVzaXJlZFN0YWtlcyA9IHZtLmN1cnJlbnRTdGFrZXM7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaW5pdGlhbGl6ZVN0YWtlaG9sZGVyc0RhdGEoKSB7XG4gICAgICBpZighZXRoZXJldW0uaXNDb25uZWN0ZWQoKSkgeyByZXR1cm47IH1cblxuICAgICAgY2hhcnQucmVtb3ZlRGF0YSgpO1xuICAgICAgc3Rha2Vob2xkZXJzRGF0YSA9IHt9O1xuICAgICAgdmFyIG51bVN0YWtlaG9sZGVycyA9IGNvbnRyYWN0Lm51bVN0YWtlaG9sZGVycygpO1xuICAgICAgZm9yKHZhciBpID0gMDsgaSA8IG51bVN0YWtlaG9sZGVyczsgKytpKSB7XG4gICAgICAgIHZhciBzdGFrZWhvbGRlckFkZHJlc3MgPSBjb250cmFjdC5zdGFrZWhvbGRlcnMoaSkudG9TdHJpbmcoKTtcbiAgICAgICAgc3Rha2Vob2xkZXJzRGF0YVtzdGFrZWhvbGRlckFkZHJlc3NdID0ge1xuICAgICAgICAgIGxhYmVsOiBzdGFrZWhvbGRlckFkZHJlc3MsXG4gICAgICAgICAgdmFsdWU6IGV0aGVyZXVtLndlYjMuZnJvbVdlaShjb250cmFjdC5zdGFrZXMoc3Rha2Vob2xkZXJBZGRyZXNzKSwgJ2V0aGVyJyksXG4gICAgICAgICAgY29sb3I6IChzdGFrZWhvbGRlckFkZHJlc3MgPT09IHZtLnNlbGVjdGVkQWNjb3VudCkgPyAnI0M5OUQ2NicgOiAnIzNEM0UzRicsXG4gICAgICAgICAgaW5kZXg6IGlcbiAgICAgICAgfTtcblxuICAgICAgICBjaGFydC5hZGREYXRhKHN0YWtlaG9sZGVyc0RhdGFbc3Rha2Vob2xkZXJBZGRyZXNzXSk7XG4gICAgICB9XG5cbiAgICAgIGNoYXJ0LmFkZERhdGEoZW1wdHlEYXRhU2xvdCk7XG4gICAgICBjaGFydC51cGRhdGUoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVSZWNlbnRSZXN1bHRzKCkge1xuICAgICAgaWYoIWV0aGVyZXVtLmlzQ29ubmVjdGVkKCkpIHsgcmV0dXJuOyB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25TdGFrZUNoYW5nZWQoZXJyb3IsIHJlc3VsdCkge1xuICAgICAgLy8gVE9ETzogQ2hlY2sgaWYgZGVzaXJlZCBjb250cmlidXRpb24gbmVlZHMgdG8gYmUgcmVkdWNlZFxuXG4gICAgICBpZighZXJyb3IpIHtcbiAgICAgICAgdmFyIHN0YWtlaG9sZGVyQWRkcmVzcyA9IHJlc3VsdC5hcmdzLnN0YWtlaG9sZGVyLnRvU3RyaW5nKCk7XG4gICAgICAgIHZhciB2YWx1ZSA9IGV0aGVyZXVtLndlYjMuZnJvbVdlaShjb250cmFjdC5zdGFrZXMoc3Rha2Vob2xkZXJBZGRyZXNzKSwgJ2V0aGVyJyk7XG4gICAgICAgIGlmKHN0YWtlaG9sZGVyQWRkcmVzcyBpbiBzdGFrZWhvbGRlcnNEYXRhKSB7XG4gICAgICAgICAgY2hhcnQuc2VnbWVudHNbc3Rha2Vob2xkZXJzRGF0YVtzdGFrZWhvbGRlckFkZHJlc3NdLmluZGV4XS52YWx1ZSA9IHZhbHVlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIHZhciBpbmRleCA9IE9iamVjdC5rZXlzKHN0YWtlaG9sZGVyc0RhdGEpLmxlbmd0aHVwZDtcbiAgICAgICAgICBzdGFrZWhvbGRlcnNEYXRhW3N0YWtlaG9sZGVyQWRkcmVzc10gPSB7XG4gICAgICAgICAgICBsYWJlbDogc3Rha2Vob2xkZXJBZGRyZXNzLFxuICAgICAgICAgICAgdmFsdWU6IHZhbHVlLFxuICAgICAgICAgICAgY29sb3I6IChzdGFrZWhvbGRlckFkZHJlc3MgPT09IHZtLnNlbGVjdGVkQWNjb3VudCkgPyAnI0M5OUQ2NicgOiAnIzNEM0UzRicsXG4gICAgICAgICAgICBpbmRleDogaW5kZXhcbiAgICAgICAgICB9O1xuICAgICAgICAgIGNoYXJ0LmFkZERhdGEoc3Rha2Vob2xkZXJzRGF0YVtzdGFrZWhvbGRlckFkZHJlc3NdLCBpbmRleCk7XG4gICAgICAgIH1cblxuICAgICAgICBjaGFydC51cGRhdGUoKTtcbiAgICAgIH1cblxuICAgICAgdXBkYXRlQmFsYW5jZSgpO1xuICAgICAgdXBkYXRlU3Rha2VzKCk7XG4gICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25Xb24oZXJyb3IsIHJlc3VsdCkge1xuICAgICAgdXBkYXRlQmFsYW5jZSgpO1xuICAgICAgdXBkYXRlU3Rha2VzKCk7XG4gICAgICB1cGRhdGVSZWNlbnRSZXN1bHRzKCk7XG4gICAgICAkc2NvcGUuJGFwcGx5KCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gb25TbGlkZXJDaGFuZ2VkKHNsaWRlcklkLCBtb2RlbFZhbHVlKSB7XG4gICAgICBjaGFydC5zZWdtZW50c1tzdGFrZWhvbGRlcnNEYXRhW3ZtLnNlbGVjdGVkQWNjb3VudC50b1N0cmluZygpXS5pbmRleF0udmFsdWUgPSBtb2RlbFZhbHVlO1xuICAgICAgY2hhcnQudXBkYXRlKCk7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gcmVsb2FkUGFnZSgpIHtcbiAgICAgICRyb3V0ZS5yZWxvYWQoKTtcbiAgICB9XG4gIH1cbn0pKCk7XG4iLCIoZnVuY3Rpb24oKSB7XG4gICd1c2Ugc3RyaWN0JztcblxuICBhbmd1bGFyLm1vZHVsZSgnZXRoZXItc3Bpbm5lcicsIFtcbiAgICAnbmdSb3V0ZScsXG4gICAgJ3J6TW9kdWxlJ1xuICBdKS5cbiAgY29uZmlnKFsnJHJvdXRlUHJvdmlkZXInLCBmdW5jdGlvbigkcm91dGVQcm92aWRlcikge1xuICAgICRyb3V0ZVByb3ZpZGVyLm90aGVyd2lzZSh7cmVkaXJlY3RUbzogJy8nfSk7XG4gIH1dKTtcbn0pKCk7XG5cbihmdW5jdGlvbigpIHtcbiAgJ3VzZSBzdHJpY3QnO1xuXG4gIFNwaW5uZXJDdHJsLiRpbmplY3QgPSBbXCIkcm91dGVcIiwgXCIkc2NvcGVcIiwgXCJldGhlcmV1bVwiXTtcbiAgYW5ndWxhci5tb2R1bGUoJ2V0aGVyLXNwaW5uZXInKS5jb250cm9sbGVyKCdTcGlubmVyQ3RybCcsIFNwaW5uZXJDdHJsKTtcblxuICAvKkBuZ0luamVjdCovXG4gIGZ1bmN0aW9uIFNwaW5uZXJDdHJsKCRyb3V0ZSwgJHNjb3BlLCBldGhlcmV1bSkge1xuICAgIHZhciB2bSA9IHRoaXM7XG4gICAgdm0uaXNDb25uZWN0ZWQgPSBldGhlcmV1bS5pc0Nvbm5lY3RlZDtcblxuICAgIHZhciBlbXB0eUJhckNvbG91ciA9ICcjZGFlNGU3JztcbiAgICB2YXIgY29udHJhY3RBZGRyZXNzID0gJzB4YUNEOWUxZTY4NjIyMjg1Q2MzZDMzOUQwNGI3NkJBN2FjRUU2RkMxQyc7XG4gICAgdmFyIGNvbnRyYWN0ID0gbnVsbDtcblxuICAgIHZhciBjaGFydDtcbiAgICB2YXIgc3Rha2Vob2xkZXJzRGF0YTtcbiAgICB2YXIgZW1wdHlEYXRhU2xvdCA9IHtcbiAgICAgIHZhbHVlOiA1LjAsXG4gICAgICBjb2xvcjogZW1wdHlCYXJDb2xvdXIsXG4gICAgICBsYWJlbDogXCJFbXB0eVwiXG4gICAgfTtcblxuICAgIGFjdGl2YXRlKCk7XG5cbiAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgIGNyZWF0ZUNoYXJ0KCk7XG4gICAgICBpZighZXRoZXJldW0uaXNDb25uZWN0ZWQoKSkgeyByZXR1cm47IH1cblxuICAgICAgdmFyIGFiaSA9IFt7XCJjb25zdGFudFwiOnRydWUsXCJpbnB1dHNcIjpbe1wibmFtZVwiOlwiXCIsXCJ0eXBlXCI6XCJhZGRyZXNzXCJ9XSxcIm5hbWVcIjpcInN0YWtlc1wiLFwib3V0cHV0c1wiOlt7XCJuYW1lXCI6XCJcIixcInR5cGVcIjpcInVpbnQyNTZcIn1dLFwidHlwZVwiOlwiZnVuY3Rpb25cIn0se1wiY29uc3RhbnRcIjp0cnVlLFwiaW5wdXRzXCI6W3tcIm5hbWVcIjpcIlwiLFwidHlwZVwiOlwidWludDI1NlwifV0sXCJuYW1lXCI6XCJzdGFrZWhvbGRlcnNcIixcIm91dHB1dHNcIjpbe1wibmFtZVwiOlwiXCIsXCJ0eXBlXCI6XCJhZGRyZXNzXCJ9XSxcInR5cGVcIjpcImZ1bmN0aW9uXCJ9LHtcImNvbnN0YW50XCI6dHJ1ZSxcImlucHV0c1wiOltdLFwibmFtZVwiOlwiZ29hbFwiLFwib3V0cHV0c1wiOlt7XCJuYW1lXCI6XCJcIixcInR5cGVcIjpcInVpbnQyNTZcIn1dLFwidHlwZVwiOlwiZnVuY3Rpb25cIn0se1wiY29uc3RhbnRcIjpmYWxzZSxcImlucHV0c1wiOltdLFwibmFtZVwiOlwicmVmdW5kU3Rha2VcIixcIm91dHB1dHNcIjpbXSxcInR5cGVcIjpcImZ1bmN0aW9uXCJ9LHtcImNvbnN0YW50XCI6ZmFsc2UsXCJpbnB1dHNcIjpbXSxcIm5hbWVcIjpcImRlc3Ryb3lcIixcIm91dHB1dHNcIjpbXSxcInR5cGVcIjpcImZ1bmN0aW9uXCJ9LHtcImNvbnN0YW50XCI6dHJ1ZSxcImlucHV0c1wiOltdLFwibmFtZVwiOlwiaW5jcmVtZW50XCIsXCJvdXRwdXRzXCI6W3tcIm5hbWVcIjpcIlwiLFwidHlwZVwiOlwidWludDI1NlwifV0sXCJ0eXBlXCI6XCJmdW5jdGlvblwifSx7XCJjb25zdGFudFwiOnRydWUsXCJpbnB1dHNcIjpbXSxcIm5hbWVcIjpcIm51bVN0YWtlaG9sZGVyc1wiLFwib3V0cHV0c1wiOlt7XCJuYW1lXCI6XCJcIixcInR5cGVcIjpcInVpbnQyNTZcIn1dLFwidHlwZVwiOlwiZnVuY3Rpb25cIn0se1wiY29uc3RhbnRcIjpmYWxzZSxcImlucHV0c1wiOlt7XCJuYW1lXCI6XCJyZWplY3RQYXJ0aWFsQmV0c1wiLFwidHlwZVwiOlwiYm9vbFwifV0sXCJuYW1lXCI6XCJidXlTdGFrZVwiLFwib3V0cHV0c1wiOltdLFwidHlwZVwiOlwiZnVuY3Rpb25cIn0se1wiY29uc3RhbnRcIjp0cnVlLFwiaW5wdXRzXCI6W3tcIm5hbWVcIjpcIlwiLFwidHlwZVwiOlwidWludDI1NlwifV0sXCJuYW1lXCI6XCJyZWNlbnRXaW5zXCIsXCJvdXRwdXRzXCI6W3tcIm5hbWVcIjpcIndpbm5lclwiLFwidHlwZVwiOlwiYWRkcmVzc1wifSx7XCJuYW1lXCI6XCJ0aW1lc3RhbXBcIixcInR5cGVcIjpcInVpbnQyNTZcIn0se1wibmFtZVwiOlwic3Rha2VcIixcInR5cGVcIjpcInVpbnQyNTZcIn1dLFwidHlwZVwiOlwiZnVuY3Rpb25cIn0se1wiY29uc3RhbnRcIjp0cnVlLFwiaW5wdXRzXCI6W10sXCJuYW1lXCI6XCJob3N0XCIsXCJvdXRwdXRzXCI6W3tcIm5hbWVcIjpcIlwiLFwidHlwZVwiOlwiYWRkcmVzc1wifV0sXCJ0eXBlXCI6XCJmdW5jdGlvblwifSx7XCJpbnB1dHNcIjpbe1wibmFtZVwiOlwiX2dvYWxJbkZpbm5leVwiLFwidHlwZVwiOlwidWludDI1NlwifSx7XCJuYW1lXCI6XCJfaW5jcmVtZW50SW5GaW5uZXlcIixcInR5cGVcIjpcInVpbnQyNTZcIn0se1wibmFtZVwiOlwiX3JlY2VudFdpbnNDb3VudFwiLFwidHlwZVwiOlwidWludDhcIn1dLFwidHlwZVwiOlwiY29uc3RydWN0b3JcIn0se1wiYW5vbnltb3VzXCI6ZmFsc2UsXCJpbnB1dHNcIjpbe1wiaW5kZXhlZFwiOmZhbHNlLFwibmFtZVwiOlwid2lubmVyXCIsXCJ0eXBlXCI6XCJhZGRyZXNzXCJ9LHtcImluZGV4ZWRcIjpmYWxzZSxcIm5hbWVcIjpcInRpbWVzdGFtcFwiLFwidHlwZVwiOlwidWludDI1NlwifSx7XCJpbmRleGVkXCI6ZmFsc2UsXCJuYW1lXCI6XCJzdGFrZVwiLFwidHlwZVwiOlwidWludDI1NlwifV0sXCJuYW1lXCI6XCJXb25cIixcInR5cGVcIjpcImV2ZW50XCJ9LHtcImFub255bW91c1wiOmZhbHNlLFwiaW5wdXRzXCI6W3tcImluZGV4ZWRcIjpmYWxzZSxcIm5hbWVcIjpcInN0YWtlaG9sZGVyXCIsXCJ0eXBlXCI6XCJhZGRyZXNzXCJ9XSxcIm5hbWVcIjpcIkNoYW5nZWRTdGFrZVwiLFwidHlwZVwiOlwiZXZlbnRcIn1dO1xuICAgICAgdmFyIGNvbnRyYWN0Qmx1ZXByaW50ID0gZXRoZXJldW0ud2ViMy5ldGguY29udHJhY3QoYWJpKTtcbiAgICAgIGNvbnRyYWN0ID0gY29udHJhY3RCbHVlcHJpbnQuYXQoY29udHJhY3RBZGRyZXNzKTtcblxuICAgICAgdm0uZ29hbCA9IGV0aGVyZXVtLndlYjMuZnJvbVdlaShjb250cmFjdC5nb2FsKCksICdldGhlcicpLnRvU3RyaW5nKCk7XG4gICAgICB2bS5zbGlkZXJTdGVwID0gZXRoZXJldW0ud2ViMy5mcm9tV2VpKGNvbnRyYWN0LmluY3JlbWVudCgpLCAnZXRoZXInKS50b1N0cmluZygpO1xuICAgICAgdm0ub25TbGlkZXJDaGFuZ2VkID0gb25TbGlkZXJDaGFuZ2VkO1xuICAgICAgZW1wdHlEYXRhU2xvdC52YWx1ZSA9IHZtLmdvYWw7XG5cbiAgICAgIHZtLmFjY291bnRzID0gZXRoZXJldW0ud2ViMy5ldGguYWNjb3VudHM7XG4gICAgICB2bS5zZWxlY3RlZEFjY291bnQgPSBldGhlcmV1bS53ZWIzLmV0aC5kZWZhdWx0QWNjb3VudDtcbiAgICAgIGlmKCF2bS5zZWxlY3RlZEFjY291bnQpIHtcbiAgICAgICAgdm0uc2VsZWN0ZWRBY2NvdW50ID0gZXRoZXJldW0ud2ViMy5ldGguY29pbmJhc2U7XG4gICAgICB9XG5cbiAgICAgIGluaXRpYWxpemVTdGFrZWhvbGRlcnNEYXRhKCk7XG4gICAgICB1cGRhdGVTdGFrZXMoKTtcbiAgICAgIHVwZGF0ZUJhbGFuY2UoKTtcbiAgICAgIHVwZGF0ZVJlY2VudFJlc3VsdHMoKTtcblxuICAgICAgdmFyIG9uU3Rha2VDaGFuZ2VkRXZlbnQgPSBjb250cmFjdC5DaGFuZ2VkU3Rha2UoKTtcbiAgICAgIG9uU3Rha2VDaGFuZ2VkRXZlbnQud2F0Y2gob25TdGFrZUNoYW5nZWQpO1xuXG4gICAgICB2YXIgb25Xb25FdmVudCA9IGNvbnRyYWN0LldvbigpO1xuICAgICAgb25Xb25FdmVudC53YXRjaChvbldvbik7XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gY3JlYXRlQ2hhcnQoKSB7XG4gICAgICB2YXIgc3RhcnRpbmdEYXRhID0gW2VtcHR5RGF0YVNsb3RdO1xuXG4gICAgICB2YXIgY2hhcnRPcHRpb25zID0ge1xuICAgICAgICBhbmltYXRpb25FYXNpbmc6ICdlYXNlSW5PdXQnLFxuICAgICAgICBzZWdtZW50U3Ryb2tlV2lkdGg6IDMsXG4gICAgICAgIGFuaW1hdGlvblN0ZXBzOiAyMCxcbiAgICAgICAgc2VnbWVudFN0cm9rZUNvbG9yOiAnI0VCRjBGMScsXG4gICAgICAgIHBlcmNlbnRhZ2VJbm5lckN1dG91dDogNzUsXG4gICAgICAgIHJlc3BvbnNpdmU6IHRydWUsXG4gICAgICAgIHRvb2x0aXBUZW1wbGF0ZTogZnVuY3Rpb24odmFsdWVPYmplY3QpIHtcbiAgICAgICAgICB2YXIgdG9vbHRpcCA9IHZhbHVlT2JqZWN0LmxhYmVsICsgXCI6IFwiICsgdmFsdWVPYmplY3QudmFsdWUgKyBcIiDOnlwiO1xuICAgICAgICAgIGlmKCEhdm0uZ29hbCkge1xuICAgICAgICAgICAgdG9vbHRpcCArPSBcIiAoXCIgKyAodmFsdWVPYmplY3QudmFsdWUgLyB2bS5nb2FsICogMTAwKSArIFwiJSlcIjtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIHRvb2x0aXA7XG4gICAgICAgIH1cbiAgICAgIH07XG5cbiAgICAgIHZhciBjdHggPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIndoZWVsXCIpLmdldENvbnRleHQoXCIyZFwiKTtcbiAgICAgIGNoYXJ0ID0gbmV3IENoYXJ0KGN0eCkuRG91Z2hudXQoc3RhcnRpbmdEYXRhLCBjaGFydE9wdGlvbnMpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZUJhbGFuY2UoKSB7XG4gICAgICBpZighZXRoZXJldW0uaXNDb25uZWN0ZWQoKSkgeyByZXR1cm47IH1cblxuICAgICAgdmFyIHdlaSA9IGV0aGVyZXVtLndlYjMuZXRoLmdldEJhbGFuY2UoY29udHJhY3RBZGRyZXNzKTtcbiAgICAgIHZhciBldGhlciA9IGV0aGVyZXVtLndlYjMuZnJvbVdlaSh3ZWksICdldGhlcicpO1xuICAgICAgdm0uYmFsYW5jZSA9IHBhcnNlRmxvYXQoZXRoZXIudG9TdHJpbmcoKSk7XG4gICAgICBjaGFydC5zZWdtZW50c1tjaGFydC5zZWdtZW50cy5sZW5ndGggLSAxXS52YWx1ZSA9ICh2bS5nb2FsIC0gdm0uYmFsYW5jZSk7XG4gICAgICBjaGFydC51cGRhdGUoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiB1cGRhdGVTdGFrZXMoKSB7XG4gICAgICBpZighZXRoZXJldW0uaXNDb25uZWN0ZWQoKSkgeyByZXR1cm47IH1cbiAgICAgIHZtLmN1cnJlbnRTdGFrZXMgPSBldGhlcmV1bS53ZWIzLmZyb21XZWkoY29udHJhY3Quc3Rha2VzKHZtLnNlbGVjdGVkQWNjb3VudCksICdldGhlcicpLnRvU3RyaW5nKCk7XG4gICAgICB2bS5kZXNpcmVkU3Rha2VzID0gdm0uY3VycmVudFN0YWtlcztcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpbml0aWFsaXplU3Rha2Vob2xkZXJzRGF0YSgpIHtcbiAgICAgIGlmKCFldGhlcmV1bS5pc0Nvbm5lY3RlZCgpKSB7IHJldHVybjsgfVxuXG4gICAgICBjaGFydC5yZW1vdmVEYXRhKCk7XG4gICAgICBzdGFrZWhvbGRlcnNEYXRhID0ge307XG4gICAgICB2YXIgbnVtU3Rha2Vob2xkZXJzID0gY29udHJhY3QubnVtU3Rha2Vob2xkZXJzKCk7XG4gICAgICBmb3IodmFyIGkgPSAwOyBpIDwgbnVtU3Rha2Vob2xkZXJzOyArK2kpIHtcbiAgICAgICAgdmFyIHN0YWtlaG9sZGVyQWRkcmVzcyA9IGNvbnRyYWN0LnN0YWtlaG9sZGVycyhpKS50b1N0cmluZygpO1xuICAgICAgICBzdGFrZWhvbGRlcnNEYXRhW3N0YWtlaG9sZGVyQWRkcmVzc10gPSB7XG4gICAgICAgICAgbGFiZWw6IHN0YWtlaG9sZGVyQWRkcmVzcyxcbiAgICAgICAgICB2YWx1ZTogZXRoZXJldW0ud2ViMy5mcm9tV2VpKGNvbnRyYWN0LnN0YWtlcyhzdGFrZWhvbGRlckFkZHJlc3MpLCAnZXRoZXInKSxcbiAgICAgICAgICBjb2xvcjogKHN0YWtlaG9sZGVyQWRkcmVzcyA9PT0gdm0uc2VsZWN0ZWRBY2NvdW50KSA/ICcjQzk5RDY2JyA6ICcjM0QzRTNGJyxcbiAgICAgICAgICBpbmRleDogaVxuICAgICAgICB9O1xuXG4gICAgICAgIGNoYXJ0LmFkZERhdGEoc3Rha2Vob2xkZXJzRGF0YVtzdGFrZWhvbGRlckFkZHJlc3NdKTtcbiAgICAgIH1cblxuICAgICAgY2hhcnQuYWRkRGF0YShlbXB0eURhdGFTbG90KTtcbiAgICAgIGNoYXJ0LnVwZGF0ZSgpO1xuICAgIH1cblxuICAgIGZ1bmN0aW9uIHVwZGF0ZVJlY2VudFJlc3VsdHMoKSB7XG4gICAgICBpZighZXRoZXJldW0uaXNDb25uZWN0ZWQoKSkgeyByZXR1cm47IH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblN0YWtlQ2hhbmdlZChlcnJvciwgcmVzdWx0KSB7XG4gICAgICAvLyBUT0RPOiBDaGVjayBpZiBkZXNpcmVkIGNvbnRyaWJ1dGlvbiBuZWVkcyB0byBiZSByZWR1Y2VkXG5cbiAgICAgIGlmKCFlcnJvcikge1xuICAgICAgICB2YXIgc3Rha2Vob2xkZXJBZGRyZXNzID0gcmVzdWx0LmFyZ3Muc3Rha2Vob2xkZXIudG9TdHJpbmcoKTtcbiAgICAgICAgdmFyIHZhbHVlID0gZXRoZXJldW0ud2ViMy5mcm9tV2VpKGNvbnRyYWN0LnN0YWtlcyhzdGFrZWhvbGRlckFkZHJlc3MpLCAnZXRoZXInKTtcbiAgICAgICAgaWYoc3Rha2Vob2xkZXJBZGRyZXNzIGluIHN0YWtlaG9sZGVyc0RhdGEpIHtcbiAgICAgICAgICBjaGFydC5zZWdtZW50c1tzdGFrZWhvbGRlcnNEYXRhW3N0YWtlaG9sZGVyQWRkcmVzc10uaW5kZXhdLnZhbHVlID0gdmFsdWU7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgdmFyIGluZGV4ID0gT2JqZWN0LmtleXMoc3Rha2Vob2xkZXJzRGF0YSkubGVuZ3RodXBkO1xuICAgICAgICAgIHN0YWtlaG9sZGVyc0RhdGFbc3Rha2Vob2xkZXJBZGRyZXNzXSA9IHtcbiAgICAgICAgICAgIGxhYmVsOiBzdGFrZWhvbGRlckFkZHJlc3MsXG4gICAgICAgICAgICB2YWx1ZTogdmFsdWUsXG4gICAgICAgICAgICBjb2xvcjogKHN0YWtlaG9sZGVyQWRkcmVzcyA9PT0gdm0uc2VsZWN0ZWRBY2NvdW50KSA/ICcjQzk5RDY2JyA6ICcjM0QzRTNGJyxcbiAgICAgICAgICAgIGluZGV4OiBpbmRleFxuICAgICAgICAgIH07XG4gICAgICAgICAgY2hhcnQuYWRkRGF0YShzdGFrZWhvbGRlcnNEYXRhW3N0YWtlaG9sZGVyQWRkcmVzc10sIGluZGV4KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNoYXJ0LnVwZGF0ZSgpO1xuICAgICAgfVxuXG4gICAgICB1cGRhdGVCYWxhbmNlKCk7XG4gICAgICB1cGRhdGVTdGFrZXMoKTtcbiAgICAgICRzY29wZS4kYXBwbHkoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvbldvbihlcnJvciwgcmVzdWx0KSB7XG4gICAgICB1cGRhdGVCYWxhbmNlKCk7XG4gICAgICB1cGRhdGVTdGFrZXMoKTtcbiAgICAgIHVwZGF0ZVJlY2VudFJlc3VsdHMoKTtcbiAgICAgICRzY29wZS4kYXBwbHkoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBvblNsaWRlckNoYW5nZWQoc2xpZGVySWQsIG1vZGVsVmFsdWUpIHtcbiAgICAgIGNoYXJ0LnNlZ21lbnRzW3N0YWtlaG9sZGVyc0RhdGFbdm0uc2VsZWN0ZWRBY2NvdW50LnRvU3RyaW5nKCldLmluZGV4XS52YWx1ZSA9IG1vZGVsVmFsdWU7XG4gICAgICBjaGFydC51cGRhdGUoKTtcbiAgICB9XG5cbiAgICBmdW5jdGlvbiByZWxvYWRQYWdlKCkge1xuICAgICAgJHJvdXRlLnJlbG9hZCgpO1xuICAgIH1cbiAgfVxufSkoKTtcblxuKGZ1bmN0aW9uKCkge1xuICAgICd1c2Ugc3RyaWN0JztcblxuICAgIGFuZ3VsYXIubW9kdWxlKCdldGhlci1zcGlubmVyJykuc2VydmljZSgnZXRoZXJldW0nLCBldGhlcmV1bSk7XG5cbiAgICAvKiBAbmdJbmplY3QgKi9cbiAgICBmdW5jdGlvbiBldGhlcmV1bSgpIHtcbiAgICAgIHZhciBzZXJ2aWNlID0ge1xuICAgICAgICB3ZWIzOiBuZXcgV2ViMygpLFxuICAgICAgICBpc0Nvbm5lY3RlZDogaXNDb25uZWN0ZWRcbiAgICAgIH07XG5cbiAgICAgIGFjdGl2YXRlKCk7XG5cbiAgICAgIHJldHVybiBzZXJ2aWNlO1xuXG4gICAgICAvLy8vLy8vLy8vLy8vLy8vLy8vXG5cbiAgICAgIGZ1bmN0aW9uIGFjdGl2YXRlKCkge1xuICAgICAgICBzZXJ2aWNlLndlYjMuc2V0UHJvdmlkZXIobmV3IHNlcnZpY2Uud2ViMy5wcm92aWRlcnMuSHR0cFByb3ZpZGVyKFwiaHR0cDovL2xvY2FsaG9zdDo4NTQ1XCIpKTtcbiAgICAgIH1cblxuICAgICAgZnVuY3Rpb24gaXNDb25uZWN0ZWQoKSB7XG4gICAgICAgIHJldHVybiBzZXJ2aWNlLndlYjMuY3VycmVudFByb3ZpZGVyLmlzQ29ubmVjdGVkKCk7XG4gICAgICB9XG4gICAgfVxufSkoKTtcbiIsIihmdW5jdGlvbigpIHtcbiAgICAndXNlIHN0cmljdCc7XG5cbiAgICBhbmd1bGFyLm1vZHVsZSgnZXRoZXItc3Bpbm5lcicpLnNlcnZpY2UoJ2V0aGVyZXVtJywgZXRoZXJldW0pO1xuXG4gICAgLyogQG5nSW5qZWN0ICovXG4gICAgZnVuY3Rpb24gZXRoZXJldW0oKSB7XG4gICAgICB2YXIgc2VydmljZSA9IHtcbiAgICAgICAgd2ViMzogbmV3IFdlYjMoKSxcbiAgICAgICAgaXNDb25uZWN0ZWQ6IGlzQ29ubmVjdGVkXG4gICAgICB9O1xuXG4gICAgICBhY3RpdmF0ZSgpO1xuXG4gICAgICByZXR1cm4gc2VydmljZTtcblxuICAgICAgLy8vLy8vLy8vLy8vLy8vLy8vL1xuXG4gICAgICBmdW5jdGlvbiBhY3RpdmF0ZSgpIHtcbiAgICAgICAgc2VydmljZS53ZWIzLnNldFByb3ZpZGVyKG5ldyBzZXJ2aWNlLndlYjMucHJvdmlkZXJzLkh0dHBQcm92aWRlcihcImh0dHA6Ly9sb2NhbGhvc3Q6ODU0NVwiKSk7XG4gICAgICB9XG5cbiAgICAgIGZ1bmN0aW9uIGlzQ29ubmVjdGVkKCkge1xuICAgICAgICByZXR1cm4gc2VydmljZS53ZWIzLmN1cnJlbnRQcm92aWRlci5pc0Nvbm5lY3RlZCgpO1xuICAgICAgfVxuICAgIH1cbn0pKCk7XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
