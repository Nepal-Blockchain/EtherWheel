!function(){"use strict";angular.module("ether-spinner",["ngRoute","rzModule"]).config(["$routeProvider",function(e){e.otherwise({redirectTo:"/"})}])}(),function(){"use strict";function e(e,t,n){function a(){if(o(),n.isConnected()){var e=[{constant:!0,inputs:[{name:"",type:"address"}],name:"stakes",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"stakeholders",outputs:[{name:"",type:"address"}],type:"function"},{constant:!0,inputs:[],name:"goal",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!1,inputs:[],name:"refundStake",outputs:[],type:"function"},{constant:!1,inputs:[],name:"destroy",outputs:[],type:"function"},{constant:!0,inputs:[],name:"increment",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"numStakeholders",outputs:[{name:"",type:"uint256"}],type:"function"},{constant:!1,inputs:[{name:"rejectPartialBets",type:"bool"}],name:"buyStake",outputs:[],type:"function"},{constant:!0,inputs:[{name:"",type:"uint256"}],name:"recentWins",outputs:[{name:"winner",type:"address"},{name:"timestamp",type:"uint256"},{name:"stake",type:"uint256"}],type:"function"},{constant:!0,inputs:[],name:"host",outputs:[{name:"",type:"address"}],type:"function"},{inputs:[{name:"_goalInFinney",type:"uint256"},{name:"_incrementInFinney",type:"uint256"},{name:"_recentWinsCount",type:"uint8"}],type:"constructor"},{anonymous:!1,inputs:[{indexed:!1,name:"winner",type:"address"},{indexed:!1,name:"timestamp",type:"uint256"},{indexed:!1,name:"stake",type:"uint256"}],name:"Won",type:"event"},{anonymous:!1,inputs:[{indexed:!1,name:"stakeholder",type:"address"}],name:"ChangedStake",type:"event"}],t=n.web3.eth.contract(e);v=t.at(h),m.goal=n.web3.fromWei(v.goal(),"ether").toString(),m.sliderStep=n.web3.fromWei(v.increment(),"ether").toString(),m.onSliderChanged=p,b.value=m.goal,m.accounts=n.web3.eth.accounts,m.selectedAccount=n.web3.eth.defaultAccount,m.selectedAccount||(m.selectedAccount=n.web3.eth.coinbase),r(),u(),m.desiredStakes=m.currentStakes,s(),i(),c();var a=v.ChangedStake();a.watch(d);var f=v.Won();f.watch(l)}}function o(){var e=[b],t={animationEasing:"easeInOut",segmentStrokeWidth:3,animationSteps:20,segmentStrokeColor:"#EBF0F1",percentageInnerCutout:75,responsive:!0,tooltipTemplate:function(e){var t=e.label===m.selectedAccount?"You":e.label,n=t+": "+e.value.toFixed(2)+" Îž";if(m.goal){var a=e.value/m.goal*100;n+=" ("+Math.round(100*a)/100+"%)"}return n}},n=document.getElementById("wheel").getContext("2d");f=new Chart(n).Doughnut(e,t)}function s(){if(n.isConnected()){var e=n.web3.eth.getBalance(h),t=n.web3.fromWei(e,"ether");m.balance=parseFloat(t.toString())}}function i(){var e=m.desiredStakes-m.currentStakes;m.newBalance=m.balance+e,f.segments[f.segments.length-1].value=m.goal-m.newBalance,f.update()}function u(){n.isConnected()&&(s(),m.currentStakes=parseFloat(n.web3.fromWei(v.stakes(m.selectedAccount),"ether").toString()),m.desiredStakes=Math.min(m.desiredStakes,m.goal-m.balance+m.currentStakes),i())}function r(){if(n.isConnected()){f.removeData(),y={};for(var e=v.numStakeholders(),t=0;e>t;++t){var a=v.stakeholders(t).toString();y[a]={label:a,value:n.web3.fromWei(v.stakes(a),"ether"),color:a===m.selectedAccount?"#5cb85c":"#3D3E3F",index:t},f.addData(y[a])}f.addData(b),f.update()}}function c(){!n.isConnected()}function d(e,a){if(!e){var o=a.args.stakeholder.toString(),i=n.web3.fromWei(v.stakes(o),"ether");if(o in y)f.segments[y[o].index].value=i;else{var r=Object.keys(y).length;y[o]={label:o,value:i,color:o===m.selectedAccount?"#5cb85c":"#3D3E3F",index:r},f.addData(y[o],r),console.log(r)}f.update()}s(),u(),t.$apply()}function l(e,n){s(),u(),c(),t.$apply()}function p(e,t){f.segments[y[m.selectedAccount.toString()].index].value=t,i()}var m=this;m.isConnected=n.isConnected;var f,y,g="#dce6e9",h="0xaCD9e1e68622285Cc3d339D04b76BA7acEE6FC1C",v=null,b={value:5,color:g,label:"Empty"};a()}e.$inject=["$route","$scope","ethereum"],angular.module("ether-spinner").controller("SpinnerCtrl",e)}(),function(){"use strict";function e(){function e(){n.web3.setProvider(new n.web3.providers.HttpProvider("http://localhost:8545"))}function t(){return n.web3.currentProvider.isConnected()}var n={web3:new Web3,isConnected:t};return e(),n}angular.module("ether-spinner").service("ethereum",e)}();