<!DOCTYPE html>
<html>
  <head>
    <title>Ether Wheel</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <base href="/">

    <!-- Styles -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/styles.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.js"></script>
  </head>

  <body ng-app="ether-spinner">
    <div class="container" style="height: 100%;">
      <div class="jumbotron">
        <h1>
          <img src="./assets/ethereumLogo.png" class="ethereum-logo">
          ether wheel<span style="color:#C99D66;">.io</span>
        </h1>
        <p>
          Each time the wheel is filled, all <strong>{{ 5 | currency:"":0 }} eth</strong> will be awarded to a randomly-selected participant. The more ether you contribute, the higher your odds of being the winner. For example, contributing 0.5 ether would give you a 10% chance of winning it all.
        </p>
      </div>

      <div ng-controller="SpinnerCtrl as vm" class="row">
        <div class="wheel col-md-7">
          <canvas
            height="200"
            class="chart chart-doughnut"
            chart-data="vm.wheelData"
            chart-labels="vm.wheelLabels"
            chart-colours="vm.wheelColours"
            chart-options="{ animationEasing: 'easeInOut', segmentStrokeWidth: 3, animationSteps: 50, segmentStrokeColor: '#EBF0F1', percentageInnerCutout: 82 }"
          >
          </canvas>
          <div class="wheel-text">
            <span class="current-ether" ng-if="vm.isConnected()">{{ vm.balance | currency:"":2 }}</span>
            <span class="current-ether" ng-if="!vm.isConnected()">?</span>
            of {{ vm.goal }} eth
            <div class="percentage">({{ vm.balance / vm.goal | number:1 }}% full)</div>
          </div>
        </div>

        <div class="row col-md-5">
          <div class="col-xlg-6">
            <div class="panel panel-default" ng-if="vm.isConnected()">
              <div class="panel-heading">
                Your Contribution
                <select class="form-control pull-right" style="height: auto; width: auto;" ng-model="vm.selectedAccount">
                  <option ng-repeat="account in vm.accounts" value="{{ account }}">
                    {{ account.toString() }}
                  </option>
                </select>
              </div>
              <div class="panel-body">
                You currently have <strong>0 eth</strong> in the wheel.

                <div class="row">
                  <div class="col-sm-8">
                    <rzslider
                      rz-slider-model="vm.desiredStakes"
                      rz-slider-options="{ floor: 0, ceil: 5, step: vm.sliderStep, precision: 2 }"
                    >
                    </rzslider>
                  </div>

                  <div class="col-sm-4">
                    <button class="btn btn-success btn-set-stakes">Set Contribution</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-xlg-6">
            <div class="panel panel-default" ng-if="vm.isConnected()">
              <div class="panel-heading">
                Recent Winners
              </div>
              <div class="panel-body">
                This is where recent winners are listed.
              </div>
            </div>
          </div>

          <div class="panel panel-danger" ng-if="!vm.isConnected()">
            <div class="panel-heading">NOT CONNECTED TO ETHEREUM</div>
            <div class="panel-body">
              <p>
                There was a problem connecting to the Ethereum network. You should access this page through the <a href="https://github.com/ethereum/mist/releases/tag/0.3.6">developer pre-release of Mist</a> or
              </p>

              <code class="well-sm">
                geth --rpc --rpccorsdomain "http://etherwheel.io"
              </code>

              <div style="margin-top: 40px;">
                <button class="btn btn-lg btn-info" ng-click="vm.reloadPage()">When you're ready, click here to try again</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer>
      Powered by <a href="http://www.ethereum.org">Ethereum</a>.
    </footer>

    <script src="/vendor.min.js"></script>
    <script src="/app.min.js"></script>
  </body>
</html>
