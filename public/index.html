<!DOCTYPE html>
<html>
  <head>
    <title>Ether Wheel</title>
    <meta name="viewport" content="initial-scale=1, maximum-scale=1, user-scalable=no" />
    <base href="/">

    <!-- Styles -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css" integrity="sha384-1q8mTJOASx8j1Au+a5WDVnPi2lkFfwwEAa8hDDdjZlpLegxhjVME1fgjWPGmkzs7" crossorigin="anonymous">
    <link href='https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,600' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" href="/styles.min.css">

    <script src="https://ajax.googleapis.com/ajax/libs/angularjs/1.4.8/angular.js"></script>
  </head>

  <body ng-app="ether-spinner">
    <div class="container" style="height: 100%;">
      <div class="jumbotron">
        <div class="row">
          <h1 class="col-md-7">
            <img src="./assets/ethereumLogo.png" class="ethereum-logo">
            ether wheel<span style="color:#C99D66;">.io</span>
          </h1>

          <div class="col-md-5" style="vertical-align: bottom;">
            adfdfdf
          </div>
        </div>

        <p>
          Each time the wheel is filled, all <strong>{{ 5 | currency:"":0 }} <small>Îž</small></strong> will be awarded to a randomly-selected participant. The more ether you contribute, the higher your odds of being the winner. For example, contributing 0.5 ether would give you a 10% chance of winning it all.
        </p>
      </div>

      <div ng-controller="SpinnerCtrl as vm" class="row">
        <div class="wheel col-md-7">
          <canvas
            height="200"
            class="chart chart-doughnut"
            chart-data="vm.wheelData"
            chart-labels="vm.wheelLabels"
            chart-colours="vm.wheelColours"
            chart-options="{ animationEasing: 'easeInOut', segmentStrokeWidth: 3, animationSteps: 50, segmentStrokeColor: '#EBF0F1', percentageInnerCutout: 82 }"
          >
          </canvas>
          <div class="wheel-text">
            <span class="current-ether" ng-if="vm.isConnected()">{{ vm.balance | currency:"":2 }}</span>
            <span class="current-ether" ng-if="!vm.isConnected()">?</span>
            of {{ vm.goal }} ether
            <div class="percentage">({{ vm.balance / vm.goal * 100 | number }}% full)</div>
          </div>
        </div>

        <div class="row col-md-5">
          <div class="col-xlg-6">
            <div class="panel panel-default" ng-if="vm.isConnected()">
              <div class="panel-heading">
                Your Contribution
                <select class="form-control pull-right" style="height: auto; width: auto;" ng-model="vm.selectedAccount">
                  <option ng-repeat="account in vm.accounts" value="{{ account }}">
                    {{ account.toString() }}
                  </option>
                </select>
              </div>
              <div class="panel-body">
                You currently have <strong>{{ vm.currentStakes }} eth</strong> in this wheel.

                <div class="row">
                  <div class="col-sm-8">
                    <rzslider
                      rz-slider-model="vm.desiredStakes"
                      rz-slider-options="{ floor: 0, ceil: vm.goal - vm.balance, step: vm.sliderStep, precision: 2, onChange: vm.onSliderChanged }"
                    >
                    </rzslider>
                  </div>

                  <div class="col-sm-4">
                    <button class="btn btn-success btn-set-stakes">Set Contribution</button>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <div class="col-xlg-6">
            <div class="panel panel-default recent-winners-box" ng-if="vm.isConnected()">
              <div class="panel-heading">
                Recent Winners
              </div>
              <div class="panel-body">
                This is where recent winners are listed.
              </div>
            </div>
          </div>

          <div class="panel panel-danger not-connected-error" ng-if="!vm.isConnected()">
            <div class="panel-heading"><i class="fa fa-exclamation-circle"></i> NOT CONNECTED TO ETHEREUM</div>
            <div class="panel-body">
              <p>
                There was a problem connecting to the Ethereum network. Your Ethereum client needs to accept cross-origin requests from this domain by using the following command:
              </p>
              <br>
              <code class="well-sm">
                geth --rpc --rpccorsdomain "http://etherwheel.io"
              </code>

              <div style="margin-top: 40px;">
                <button class="btn btn-lg btn-info" ng-click="vm.reloadPage()">When you're ready, click here to try again</button>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div class="info-boxes">
      <div class="container">
        <div class="panel panel-default info-box">
          <header><i class="fa fa-question-circle"></i>How do I use this application?</header>
          <p>
            Ether Wheel is a distributed application running on the <a href="http://www.ethereum.org">Ethereum network</a>. Each wheel has a designated capacity. Users can put as much ether as they want into the wheel. When the wheel is filled up, a winner is randomly selected, weighted by the amount of ether each participant contributed. All of the ether in the wheel is then sent to that account. In other words, the amount of ether that you put in is directly correlated with your chances of winning the entire pot.
          </p>
        </div>

        <div class="panel panel-default info-box">
          <header><i class="fa fa-lock"></i>How can I trust that this site works the way it claims?</header>
          <p>
            TODO
          </p>
        </div>

        <div class="panel panel-default info-box">
          <header><i class="fa fa-undo"></i>Can my ether be refunded?</header>
          <p>
            Yes! Before the wheel fills up and a winner is chosen, you can raise or lower your contribution at any time. However, once the wheel has been filled, the ether will be sent to the winner, and this cannot be undone.
          </p>
        </div>

        <div class="panel panel-default info-box">
          <header><i class="fa fa-user-secret"></i>Is it possible to cheat?</header>
          </p>The short answer: no.</p>
          <p>
            The long answer: those of you who are cryptographically-savvy may notice that Ether Wheel uses a block hash as the seed to semi-randomly determine the winner. Mathematically-speaking, there does exist a slim chance for a miner using this dapp to abandon a block that does not declare them as the winner. However, since the reward for mining a block is 5 ether, and all ether wheels have a capacity of 5 ether or less, there is absolutely no incentive for a miner to attempt performing this cheat, since it would result in a net loss of ether for them.
          </p>
        </div>

        <div class="panel panel-default info-box">
          <header><i class="fa fa-bitcoin"></i>Do you profit from this?</header>
          <p>
            The Ether Wheel smart-contract does send me (the developer) 1% of the pool at the time that a winner is declared, in order to compensate for hosting/domain name fees, my development time, and a cup of coffee or two. <i class="fa fa-smile-o"></i> Other than that, etherwheel.io only benefits its users.
          </p>
        </div>

        <div class="panel panel-default info-box">
          <header><i class="fa fa-life-ring"></i>How can I support this site?</header>
          <p>
            If you're a developer, feel free to make suggestions or pull requests on GitHub to improve this dapp. If you just want to show your approval and support the Ethereum community, why not a few finney to my Ethereum account? <i class="fa fa-smile-o"></i></i><br><code>0xEeD1614CDEfBBdAd2cC8Af7AF2fd4beB93F1cCAc</code>
          </p>
        </div>
      </div>
    </div>
    <footer>
      Powered by <a href="http://www.ethereum.org">Ethereum</a>.
    </footer>

    <script src="/vendor.min.js"></script>
    <script src="/app.min.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.5.0/css/font-awesome.min.css">
  </body>
</html>
